<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAEFLIX - Filmes e Séries</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0c0c0f; overflow-x: hidden; }
        :root { --swiper-theme-color: #E50914; }

        .hero-swiper { width: 100%; height: 85vh; }
        .swiper-slide { position: relative; display: flex; align-items: flex-end; }
        .swiper-slide img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; }
        .slide-overlay { position: absolute; inset: 0; background: linear-gradient(to top, rgba(12, 12, 15, 1) 10%, transparent 50%), linear-gradient(to right, rgba(12, 12, 15, 0.7) 10%, transparent 50%); }
        .slide-content { position: relative; z-index: 10; padding: 2rem 4rem; max-width: 50%; }
        
        .swiper-button-next, .swiper-button-prev { color: #fff !important; background-color: rgba(0,0,0,0.3); border-radius: 50%; width: 50px; height: 50px; }
        .swiper-button-next:after, .swiper-button-prev:after { font-size: 24px !important; font-weight: bold; }
        
        .movie-card { position: relative; border-radius: 0.5rem; overflow: hidden; cursor: pointer; transition: transform 0.3s ease; }
        .movie-card:hover { transform: scale(1.05); }
        .card-img { width: 100%; height: 100%; object-fit: cover; }
        .play-overlay { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; background-color: rgba(0,0,0,0.4); opacity: 0; transition: opacity 0.3s ease; }
        .movie-card:hover .play-overlay { opacity: 1; }
        .play-icon { width: 50px; height: 50px; background-color: rgba(0,0,0,0.5); border: 2px solid white; border-radius: 50%; display:flex; align-items:center; justify-content:center; }
        
        #details-page { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background-color: #0c0c0f; z-index: 60; overflow-y: auto; transform: translateX(100%); transition: transform 0.5s cubic-bezier(0.77, 0, 0.175, 1); }
        #details-page.visible { transform: translateX(0); }
        .backdrop-img { position: absolute; top: 0; left: 0; width: 100%; height: 70vh; object-fit: cover; z-index: -1; }
        .backdrop-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 70vh; background: linear-gradient(to top, #0c0c0f 15%, transparent 100%); z-index: -1; }
    </style>
</head>
<body class="text-white">

    <header class="fixed top-0 left-0 right-0 z-50 bg-black bg-opacity-50 backdrop-blur-md">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center space-x-8">
                    <a href="/"> <img src="https://i.ibb.co/XrGt6ymb/Chat-GPT-Image-14-de-ago-de-2025-23-47-40.png" alt="BAEFLIX Logo" class="h-16 w-auto"> </a>
                    <nav id="main-nav" class="hidden md:flex items-center space-x-4">
                        <a href="#" class="text-gray-300 hover:text-white transition-colors duration-200 px-3 py-2 rounded-md text-sm font-medium bg-gray-800 text-white" data-content="filmes">Filmes</a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors duration-200 px-3 py-2 rounded-md text-sm font-medium" data-content="series">Séries</a>
                    </nav>
                </div>
                <div class="flex items-center space-x-4"> <input type="text" id="searchInput" placeholder="Procurar" class="bg-black bg-opacity-20 border border-gray-700 rounded-md py-1 px-3 text-white placeholder-gray-400 focus:outline-none focus:border-red-500 transition-colors w-32 sm:w-48"> </div>
            </div>
        </div>
    </header>

    <main id="main-content">
        <section class="relative -mt-20">
            <div class="swiper-container hero-swiper">
                <div class="swiper-wrapper" id="hero-wrapper"></div>
                <div class="swiper-pagination"></div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
            </div>
        </section>
        <section id="content-area" class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <h2 id="grid-title" class="text-2xl font-bold mb-4">Filmes Populares</h2>
            <div id="media-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6"></div>
        </section>
    </main>
    
    <div id="details-page">
        <button id="back-btn" class="fixed top-6 left-6 z-20 bg-black/50 p-2 rounded-full text-white hover:bg-white/20 transition-colors"> <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> </button>
        <div id="details-content" class="relative"></div>
    </div>
    
    <script type="module">
        const TMDB_API_KEY = "cf64e357f3a003e17687bb93cb692d6e";
        const TMDB_API_BASE_URL = "https://api.themoviedb.org/3";
        const TMDB_IMAGE_BASE_URL_W500 = "https://image.tmdb.org/t/p/w500";
        const TMDB_IMAGE_BASE_URL_ORIGINAL = "https://image.tmdb.org/t/p/original";
        
        const mainNav = document.getElementById('main-nav');
        const mediaGrid = document.getElementById('media-grid');
        const gridTitle = document.getElementById('grid-title');
        const heroWrapper = document.getElementById('hero-wrapper');
        const mainContent = document.getElementById('main-content');
        const detailsPage = document.getElementById('details-page');
        const detailsContent = document.getElementById('details-content');
        const backBtn = document.getElementById('back-btn');

        async function fetchAPI(endpoint) {
            const url = `${TMDB_API_BASE_URL}/${endpoint}?api_key=${TMDB_API_KEY}&language=pt-BR`;
            const response = await fetch(url);
            if (!response.ok) throw new Error(`Erro na API: ${response.statusText}`);
            return await response.json();
        }

        function createMediaCard(media) {
            const title = media.title || media.name;
            const posterUrl = media.poster_path ? `${TMDB_IMAGE_BASE_URL_W500}${media.poster_path}` : 'https://placehold.co/500x750/1a1a1a/ffffff?text=Capa';
            return `
                <div class="movie-card" data-id="${media.id}" data-type="${media.title ? 'movie' : 'tv'}">
                    <img src="${posterUrl}" alt="Poster de ${title}" class="card-img rounded-lg">
                    <div class="play-overlay"><div class="play-icon"><svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 20 20"><path d="M8 5l8 5-8 5V5z"></path></svg></div></div>
                </div>`;
        }
        
        function createHeroSlide(media) {
            const title = media.title || media.name;
            const backdropUrl = media.backdrop_path ? TMDB_IMAGE_BASE_URL_ORIGINAL + media.backdrop_path : '';
            return `
                <div class="swiper-slide">
                    <img src="${backdropUrl}" alt="${title}">
                    <div class="slide-overlay"></div>
                    <div class="slide-content">
                        <h1 class="text-4xl md:text-6xl font-black text-white">${title}</h1>
                        <p class="text-gray-300 my-4 line-clamp-3">${media.overview}</p>
                        <button class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-lg watch-btn" data-id="${media.id}" data-type="movie">Assistir Agora</button>
                    </div>
                </div>`;
        }

        async function displayMedia(type = 'movie') {
            const endpoint = type === 'movie' ? 'movie/popular' : 'tv/popular';
            gridTitle.textContent = type === 'movie' ? 'Filmes Populares' : 'Séries Populares';
            mediaGrid.innerHTML = '<p class="text-gray-400 col-span-full text-center">Carregando...</p>';
            const data = await fetchAPI(endpoint);
            if (data && data.results) {
                mediaGrid.innerHTML = data.results.map(media => createMediaCard(media)).join('');
            }
        }

        async function showDetailsPage(mediaId, mediaType) {
            const data = await fetchAPI(`${mediaType}/${mediaId}`);
            const title = data.title || data.name;
            const overview = data.overview || 'Sinopse não disponível.';
            const backdropUrl = data.backdrop_path ? TMDB_IMAGE_BASE_URL_ORIGINAL + data.backdrop_path : '';
            const posterUrl = data.poster_path ? TMDB_IMAGE_BASE_URL_W500 + data.poster_path : '';

            let contentHtml = `
                <div class="relative"><img src="${backdropUrl}" class="backdrop-img"><div class="backdrop-overlay"></div></div>
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative pt-[45vh] pb-16">
                    <div class="md:flex md:gap-8">
                        <div class="flex-shrink-0 w-48 md:w-64 mx-auto md:mx-0 -mt-24 md:-mt-32"><img src="${posterUrl}" class="w-full rounded-lg shadow-2xl"></div>
                        <div class="mt-6 md:mt-0 text-center md:text-left">
                            <h1 class="text-3xl md:text-5xl font-bold">${title}</h1>
                            <p class="mt-4 text-gray-300 max-w-2xl">${overview}</p>
                            ${mediaType === 'movie' ? `<button class="watch-btn mt-6 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg" data-id="${mediaId}" data-type="movie">Assistir Agora</button>` : ''}
                        </div>
                    </div>
                    ${mediaType === 'tv' ? `<div id="seasons-container" class="mt-12"></div>` : ''}
                </div>`;
            detailsContent.innerHTML = contentHtml;
            mainContent.style.display = 'none';
            detailsPage.classList.add('visible');

            if (mediaType === 'tv') {
                displaySeasons(mediaId, data.seasons);
            }
        }
        
        function displaySeasons(tvId, seasons) {
            const seasonsContainer = document.getElementById('seasons-container');
            const seasonOptions = seasons.filter(s => s.season_number > 0).map(s => `<option value="${s.season_number}">Temporada ${s.season_number}</option>`).join('');
            seasonsContainer.innerHTML = `
                <div class="flex items-center gap-4 mb-6">
                    <h2 class="text-2xl font-bold text-white">Temporadas</h2>
                    <select id="season-select" class="bg-gray-800 border border-gray-700 rounded-md p-2 text-white">${seasonOptions}</select>
                </div>
                <div id="episodes-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>`;
            
            const seasonSelect = document.getElementById('season-select');
            seasonSelect.addEventListener('change', () => displayEpisodes(tvId, seasonSelect.value));
            displayEpisodes(tvId, seasonSelect.value);
        }

        async function displayEpisodes(tvId, seasonNumber) {
            const episodesList = document.getElementById('episodes-list');
            episodesList.innerHTML = `<p class="text-gray-400">Carregando episódios...</p>`;
            const data = await fetchAPI(`tv/${tvId}/season/${seasonNumber}`);
            if (data && data.episodes) {
                episodesList.innerHTML = data.episodes.map(ep => `
                    <a href="player.html?id=${tvId}&s=${seasonNumber}&e=${ep.episode_number}" class="bg-gray-800 p-4 rounded-lg hover:bg-gray-700 transition-colors block">
                        <p class="font-bold text-white truncate">E${ep.episode_number} - ${ep.name}</p>
                        <p class="text-xs text-gray-400 mt-1 line-clamp-2">${ep.overview || 'Sem descrição.'}</p>
                    </a>
                `).join('');
            }
        }

        function hideDetailsPage() {
            detailsPage.classList.remove('visible');
            mainContent.style.display = 'block';
        }

        document.addEventListener('DOMContentLoaded', async () => {
            displayMedia('movie');
            const heroData = await fetchAPI('movie/popular');
            if (heroData && heroData.results) {
                heroWrapper.innerHTML = heroData.results.slice(0, 5).map(media => createHeroSlide(media)).join('');
                new Swiper('.hero-swiper', { loop: true, autoplay: { delay: 5000 }, pagination: { el: '.swiper-pagination', clickable: true }, navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' } });
            }
        });
        
        mainNav.addEventListener('click', e => { e.preventDefault(); const target = e.target.closest('a'); if (!target) return; mainNav.querySelector('.bg-gray-800').classList.remove('bg-gray-800', 'text-white'); target.classList.add('bg-gray-800', 'text-white'); displayMedia(target.dataset.content); });
        mediaGrid.addEventListener('click', e => { const card = e.target.closest('.movie-card'); if (card) showDetailsPage(card.dataset.id, card.dataset.type); });
        detailsContent.addEventListener('click', e => { const btn = e.target.closest('.watch-btn'); if (btn) window.location.href = `player.html?id=${btn.dataset.id}`; });
        heroWrapper.addEventListener('click', e => { const btn = e.target.closest('.watch-btn'); if (btn) window.location.href = `player.html?id=${btn.dataset.id}`; });
        backBtn.addEventListener('click', hideDetailsPage);
    </script>
</body>
</html>
